(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[7],{18:function(e,t,a){"use strict";var n=a(11),l=a.n(n),r={apiKey:"".concat("AIzaSyCtYbpFnlBAxeqBy9xdcZc4H6S8_AYtj6Q"),authDomain:"parallel-monument.firebaseapp.com",databaseURL:"https://parallel-monument.firebaseio.com",projectId:"parallel-monument",storageBucket:"parallel-monument.appspot.com",messagingSenderId:"915319114232"};l.a.apps.length?l.a.app():l.a.initializeApp(r)},58:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n=a(14),l=a(15),r=a(19),s=a(16),i=a(20),u=a(0),c=a.n(u),o=a(47),m=a.n(o),d=a(11),p=a.n(d),f=(a(23),a(25),a(18),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).writeUserData=function(){p.a.database().ref("/developers").set(a.state.developers)},a.getUserData=function(){p.a.database().ref("/").on("value",(function(e){var t=e.val();a.setState(t)}))},a.handleSubmit=function(e){e.preventDefault();var t=parseFloat(a.refs.lat.value),n=parseFloat(a.refs.lng.value),l=a.refs.name.value,r=a.refs.email.value,s=a.refs.title.value,i=a.refs.role.value,u=a.refs.subscribe.value,c=a.refs.uid.value;if(c&&l&&r&&s&&i&&u&&t&&n){var o=a.state.developers,m=o.findIndex((function(e){return e.uid===c}));o[m].lat=t,o[m].lng=n,o[m].name=l,o[m].email=r,o[m].title=s,o[m].role=i,o[m].subscribe=u,a.setState({developers:o})}else if(t&&n&&l&&r&&s&&i&&u){var d=(new Date).getTime().toString(),p=a.state.developers;p.push({lat:t,lng:n,uid:d,name:l,email:r,title:s,role:i,subscribe:u}),a.setState({developers:p})}a.refs.lat.value="",a.refs.lng.value="",a.refs.name.value="",a.refs.email.value="",a.refs.title.value="",a.refs.role.value="",a.refs.subscribe.value="",a.refs.uid.value="",a.setState({modalOpen:!1})},a.removeData=function(e){window.confirm("Are you sure?");var t=a.state.developers.filter((function(t){return t.uid!==e.uid}));a.setState({developers:t})},a.updateData=function(e){a.setState({modalOpen:!0}),a.refs.uid.value=e.uid,a.refs.name.value=e.name,a.refs.email.value=e.email,a.refs.role.value=e.role,a.refs.subscribe.value=e.subscribe,a.refs.lat.value=e.lat,a.refs.lng.value=e.lng,a.refs.title.value=e.title},a.onCloseForm=function(e){e.stopPropagation(),a.setState({modalOpen:!1})},a.onNewForm=function(e){e.stopPropagation(),a.setState({modalOpen:!0})},a.state={developers:[],modalOpen:!1},a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"componentDidUpdate",value:function(e,t){t!==this.state.developers&&this.writeUserData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.developers,n=t.modalOpen;return c.a.createElement("div",{className:"admin"},c.a.createElement("div",{className:"card-body"},c.a.createElement("p",{className:"center"},c.a.createElement("button",{onClick:this.onNewForm,className:"btn border"},"Create"))),c.a.createElement("div",{className:"row"},a.map((function(t){return c.a.createElement("div",{key:t.uid,className:"card-body"},c.a.createElement("p",{className:"center"},c.a.createElement("span",{className:"bborder"},t.lat),c.a.createElement("span",{className:"bborder"},t.lng)),c.a.createElement("p",null,t.name),c.a.createElement("p",null,c.a.createElement("a",{href:"mailto:".concat(t.email)},t.email)),c.a.createElement("p",null,"Subscribe:",t.subscribe),c.a.createElement("p",{className:"card-text",style:{textAlign:"center"}},t.title),c.a.createElement("p",{className:"card-text"},t.role),c.a.createElement("p",{className:"center"},c.a.createElement("button",{onClick:function(){return e.removeData(t)},className:"btn border"},"Delete"),c.a.createElement("button",{onClick:function(){return e.updateData(t)},className:"btn border"},"Edit")))}))),c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit,className:"form border",style:{display:n?"flex":"none"}},c.a.createElement("div",null,c.a.createElement("button",{onClick:this.onCloseForm,className:"close"},"\xd7")),c.a.createElement("div",{className:"form-row"},c.a.createElement("div",null,c.a.createElement("label",null,"Latitude"),c.a.createElement("input",{type:"text",ref:"lat",placeholder:"0"})),c.a.createElement("div",null,c.a.createElement("label",null,"Longitude"),c.a.createElement("input",{type:"text",ref:"lng",placeholder:"0"}))),c.a.createElement("div",{className:"form-row"},c.a.createElement("input",{type:"hidden",ref:"uid"}),c.a.createElement("div",null,c.a.createElement("label",null,"Qui"),c.a.createElement("input",{type:"text",ref:"name",placeholder:"Votre nom"})),c.a.createElement("div",null,c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",ref:"email",placeholder:"Votre email"})),c.a.createElement("div",null,c.a.createElement("label",null,"Quand"),c.a.createElement("input",{type:"text",ref:"title",placeholder:"JJ/MM/AAAA"})),c.a.createElement("div",null,c.a.createElement("label",null,"Quoi"),c.a.createElement("textarea",{type:"text",ref:"role",placeholder:"Votre texte"}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit",className:"close"},"Enregistrer")))))}}]),t}(c.a.Component)),v=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,i=new Array(l),u=0;u<l;u++)i[u]=arguments[u];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={isSignedIn:!1},a.uiConfig={signInFlow:"popup",signInOptions:[p.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unregisterAuthObserver=p.a.auth().onAuthStateChanged((function(t){return e.setState({isSignedIn:!!t})}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"render",value:function(){return this.state.isSignedIn?c.a.createElement("div",null,c.a.createElement("h1",null,"Parallel Monument"),c.a.createElement("div",{className:"card-body"},c.a.createElement("p",{className:"center"},c.a.createElement("button",{className:"btn border",onClick:function(){return p.a.auth().signOut()}},"Sign-out"))),c.a.createElement(f,null)):c.a.createElement("div",{className:"signin"},c.a.createElement(m.a,{uiConfig:this.uiConfig,firebaseAuth:p.a.auth()}))}}]),t}(c.a.Component)}}]);
//# sourceMappingURL=7.438faf59.chunk.js.map